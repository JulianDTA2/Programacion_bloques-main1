# Ardublockly - Visual Programming Editor for Arduino

**Ardublockly** is a visual programming editor for Arduino based on [Google Blockly](https://developers.google.com/blockly/). It allows programming Arduino boards using drag-and-drop visual blocks, automatically generating Arduino code.

This version has been customized and packaged as **RoboticMinds Portable** for easier distribution and use.

![Ardublockly](http://carlosperate.github.io/ardublockly/images/screenshot_desktop_1.png)

## ğŸŒŸ Features

* âœ¨ Generate Arduino code with visual drag-and-drop blocks
* ğŸ”Œ Upload code directly to Arduino boards
* âš ï¸ Helpful code block warnings
* ğŸ¯ Compatible with a wide range of official Arduino boards
* ğŸ’» Works on Windows / Linux / Mac OS X

## âš ï¸ IMPORTANT: Files NOT Included in This Repository

> **Note**: Due to GitHub size limitations (files >100MB), this repository **does NOT include** some necessary files that you must download separately. Don't worry! The files are still on the original machine, they're just not on GitHub.

### ğŸ“¦ Excluded Files (You Must Download)

**The following files are NOT in this GitHub repository** because they are very large (~210MB+), but they are necessary for the application to work:

1. **Arduino IDE 1.8.19 (Portable)** - Required âœ…
   - ğŸ“¥ **Download**: [Arduino 1.8.19 Windows](https://downloads.arduino.cc/arduino-1.8.19-windows.zip) (210MB)
   - ğŸ“¥ Alternative: [All Arduino IDE versions](https://www.arduino.cc/en/software)
   - ğŸ“‚ **Where to place**: Extract to project root folder as `arduino-1.8.19/`
   - âš ï¸ **Recommended version**: 1.8.19 (version used in original development)

2. **Python Virtual Environment** - Created automatically
   - ğŸ“‚ Folder `.venv/` (not included, generated with `python -m venv .venv`)
   - Contains installed Python libraries

3. **Build Files** - Generated locally
   - ğŸ“‚ Folders `dist/` and `build/` (generated by PyInstaller)
   - Only needed if you want to create the portable executable

### âœ… What IS Included

- âœ… Complete Ardublockly source code
- âœ… Python server (`ardublocklyserver/`)
- âœ… Web interface (`ardublockly/`)
- âœ… Block definitions (`blocks/`)
- âœ… Examples (`examples/`)
- âœ… Blockly and Closure libraries (Git submodules)
- âœ… `requirements.txt` file with all Python dependencies

## ğŸ“‹ System Requirements

### Required Software

1. **Python 3.6 or higher** âœ…
   - **Version used in development**: Python 3.13.1
   - **Minimum version**: Python 3.6+
   - ğŸ“¥ Download from: https://www.python.org/downloads/
   - âš ï¸ **IMPORTANT**: During installation, **CHECK** the option **"Add Python to PATH"**
   - Verify installation: `python --version`

2. **Arduino IDE 1.8.19** âœ… (Required)
   - **Exact version used**: 1.8.19
   - ğŸ“¥ **Download Windows**: [arduino-1.8.19-windows.zip](https://downloads.arduino.cc/arduino-1.8.19-windows.zip) (210MB)
   - ğŸ“¥ **Other platforms**: [Arduino IDE Downloads](https://www.arduino.cc/en/software)
   - âš ï¸ **Recommendation**: Use version 1.8.19 for maximum compatibility

3. **Git** (Optional, for cloning repository)
   - ğŸ“¥ Download from: https://git-scm.com/downloads
   - Alternative: Download project as ZIP from GitHub

### Compatible Operating Systems

- âœ… Windows 7/8/10/11 (64-bit recommended)
- âœ… macOS 10.12 or higher
- âœ… Linux (Ubuntu 18.04+, Debian, Fedora, etc.)

## ğŸš€ Complete Installation (Step by Step)

### Step 1: Get the Source Code

#### Option A: Clone from GitHub (Recommended)

```bash
# 1. Clone repository with submodules
git clone https://github.com/MdavidC-DevTech/Programacion_bloques.git
cd Programacion_bloques

# 2. Initialize submodules (blockly and closure-library)
git submodule update --init --recursive
```

#### Option B: Download ZIP

1. Go to https://github.com/MdavidC-DevTech/Programacion_bloques
2. Click **Code** â†’ **Download ZIP**
3. Extract to a folder of your choice
4. Open terminal/CMD in that folder

### Step 2: Setup Python Virtual Environment

```bash
# 1. Verify Python is installed
python --version
# Should show: Python 3.x.x

# 2. Create virtual environment (RECOMMENDED)
python -m venv .venv

# 3. Activate virtual environment
# On Windows:
.venv\Scripts\activate

# On Linux/Mac:
source .venv/bin/activate

# 4. Install ALL dependencies from requirements.txt
pip install -r requirements.txt
```

**Dependencies that will be installed** (see complete `requirements.txt`):
- `bottle==0.12.25` - Web framework
- `gevent==25.9.1` - Concurrent HTTP server
- `pyinstaller==6.16.0` - For creating executables
- `requests==2.32.5` - HTTP client
- `waitress==3.0.2` - WSGI server
- And more... (~29 packages total)

### Step 3: Install Arduino IDE 1.8.19

**Windows:**

1. ğŸ“¥ Download: [arduino-1.8.19-windows.zip](https://downloads.arduino.cc/arduino-1.8.19-windows.zip) (210MB)
2. Extract the ZIP to the **project root folder** (same level as `start.py`)
3. Should result in: `Programacion_bloques/arduino-1.8.19/arduino.exe`
4. âš ï¸ **Important**: The folder must be named exactly `arduino-1.8.19`

**Linux:**

```bash
# Install from repository (Ubuntu/Debian)
sudo apt-get update
sudo apt-get install arduino

# Or download from Arduino.cc
wget https://downloads.arduino.cc/arduino-1.8.19-linux64.tar.xz
tar -xvf arduino-1.8.19-linux64.tar.xz
```

**macOS:**

1. ğŸ“¥ Download from: https://www.arduino.cc/en/software
2. Install the application to `/Applications/Arduino.app`

### Step 4: Verify Project Structure

Your folder should look like this:

```
Programacion_bloques/
â”œâ”€â”€ .venv/                    â† Virtual environment (created in Step 2)
â”œâ”€â”€ arduino-1.8.19/           â† Arduino IDE (downloaded in Step 3)
â”‚   â”œâ”€â”€ arduino.exe           (Windows)
â”‚   â”œâ”€â”€ arduino_debug.exe     (Windows)
â”‚   â””â”€â”€ ...
â”œâ”€â”€ ardublockly/              â† Source code (included)
â”œâ”€â”€ ardublocklyserver/        â† Python server (included)
â”œâ”€â”€ blockly/                  â† Submodule (included)
â”œâ”€â”€ closure-library/          â† Submodule (included)
â”œâ”€â”€ blocks/                   â† Arduino blocks (included)
â”œâ”€â”€ examples/                 â† Examples (included)
â”œâ”€â”€ start.py                  â† Main script (included)
â”œâ”€â”€ requirements.txt          â† Dependencies (included)
â”œâ”€â”€ README.md                 â† This file
â””â”€â”€ README_ES.md              â† Spanish version
```

## â–¶ï¸ Running the Program

### Method 1: Using Python (Development)

```bash
# 1. Activate virtual environment (if not activated)
# Windows:
.venv\Scripts\activate
# Linux/Mac:
source .venv/bin/activate

# 2. Run the server
python start.py
```

The browser will automatically open at `http://localhost:8000`

### Method 2: Portable Version (Executable)

If you have the PyInstaller packaged version:

```bash
# Windows:
.\dist\start\start.exe

# The executable includes everything except Arduino IDE
```

## âš™ï¸ Initial Configuration

### First time running Ardublockly:

1. **Open the application** - It will open in your browser
2. **Go to Settings** - Gear icon âš™ï¸
3. **Set Arduino IDE path**:
   - Windows: `C:\Program Files\Arduino\arduino_debug.exe` or `C:\Program Files (x86)\Arduino\arduino_debug.exe`
   - Linux: `/usr/bin/arduino` or `/usr/local/bin/arduino`
   - macOS: `/Applications/Arduino.app/Contents/MacOS/Arduino`
4. **Select your Arduino Board** (e.g., Arduino Uno, Mega, Nano, etc.)
5. **Select COM Port** where your board is connected

## ğŸ“‚ Project Structure

```
Programacion_bloques/
â”œâ”€â”€ ardublockly/          # Main web interface
â”‚   â”œâ”€â”€ index.html        # Main page
â”‚   â”œâ”€â”€ ardublockly.js    # Main logic
â”‚   â””â”€â”€ msg/              # Translations
â”œâ”€â”€ ardublocklyserver/    # Python backend server
â”‚   â”œâ”€â”€ server.py         # HTTP server
â”‚   â”œâ”€â”€ actions.py        # Actions (compile, upload)
â”‚   â””â”€â”€ compilersettings.py
â”œâ”€â”€ blockly/              # Google Blockly library (submodule)
â”œâ”€â”€ closure-library/      # Google Closure Library (submodule)
â”œâ”€â”€ blocks/               # Arduino block definitions
â”œâ”€â”€ examples/             # Project examples
â”œâ”€â”€ start.py              # Main entry point
â”œâ”€â”€ requirements.txt      # Python dependencies
â”œâ”€â”€ README.md             # This file
â””â”€â”€ README_ES.md          # Spanish version
```

## ğŸ”§ Main Dependencies

Dependencies are automatically installed with `pip install -r requirements.txt`:

- **bottle** (0.12.25) - Lightweight web framework
- **gevent** (25.9.1) - Concurrent server
- **pyinstaller** (6.16.0) - For creating executables
- **requests** (2.32.5) - HTTP client
- **waitress** (3.0.2) - WSGI server
- And more... (see `requirements.txt`)

## ğŸ› ï¸ Development and Customization

### Build Portable Executable (.exe) with PyInstaller

If you want to create a portable executable (like `RoboticLab.exe`) that works without installing Python:

#### Prerequisites

1. Have everything working with `python start.py`
2. Have PyInstaller installed (already in `requirements.txt`)
3. Have the `arduino-1.8.19/` folder in your project

#### Steps to Create the Executable

```bash
# 1. Activate virtual environment
.venv\Scripts\activate

# 2. Verify PyInstaller is installed
pip show pyinstaller
# Should show: Version: 6.16.0

# 3. Run PyInstaller with the spec file
pyinstaller start.spec
```

#### What Does PyInstaller Do?

PyInstaller analyzes your Python code and:

1. **Creates `build/` folder** - Temporary compilation files
   - ğŸ“‚ `build/RoboticLab/` - Intermediate files (.pyc, dependency analysis)
   - âš ï¸ **Purpose**: PyInstaller stores temporary files here during the process
   - ğŸ’¡ **Note**: This folder can be **deleted** after creating the .exe
   - Not needed to run the program, only for compilation

2. **Creates `dist/` folder** - Final application ready to distribute
   - ğŸ“‚ `dist/RoboticLab/` - Folder with the executable and all dependencies
   - ğŸ“„ `dist/RoboticLab/RoboticLab.exe` - **This is your portable executable**
   - ğŸ“¦ Includes: Packaged Python, all libraries, project files
   - âœ… **This folder IS necessary** - Contains your complete application

#### Structure After PyInstaller

```
Programacion_bloques/
â”œâ”€â”€ build/                    â† Temporary files (can be deleted)
â”‚   â””â”€â”€ RoboticLab/          
â”‚       â””â”€â”€ ... (.pyc files, analysis)
â”œâ”€â”€ dist/                     â† Final portable application
â”‚   â””â”€â”€ RoboticLab/          
â”‚       â”œâ”€â”€ RoboticLab.exe   â† Your main executable
â”‚       â”œâ”€â”€ _internal/        â† Folders with packaged dependencies
â”‚       â”‚   â”œâ”€â”€ ardublockly/
â”‚       â”‚   â”œâ”€â”€ arduino-1.8.19/
â”‚       â”‚   â”œâ”€â”€ blockly/
â”‚       â”‚   â””â”€â”€ ... (everything needed)
â”‚       â””â”€â”€ ... (DLLs, libraries)
â”œâ”€â”€ .venv/                    â† Virtual environment (not packaged)
â”œâ”€â”€ start.py                  â† Original source code
â””â”€â”€ start.spec                â† PyInstaller configuration
```

#### Run Your Portable Application

```bash
# Option 1: From command line
.\dist\RoboticLab\RoboticLab.exe

# Option 2: Double click the file
# Navigate to dist\RoboticLab\ and double click RoboticLab.exe
```

#### Distribute Your Application

To share your application with others:

1. **Compress the `dist/RoboticLab/` folder** completely into a ZIP
2. Users only need to:
   - Extract the ZIP
   - Run `RoboticLab.exe`
   - **DO NOT need** to install Python or dependencies
   - They DO need to download Arduino IDE 1.8.19 separately

#### Customize the Executable

The `start.spec` file controls how packaging works. Key aspects:

```python
# Executable name
name='RoboticLab'  # Creates RoboticLab.exe

# Executable icon
icon=['RoboticMinds.ico']  # Your custom icon

# Files to include
datas=[
    ('ardublocklyserver', 'ardublocklyserver'),
    ('arduino-1.8.19', 'arduino-1.8.19'),  # Arduino IDE included
    ('ardublockly', 'ardublockly'),
    # ... etc
]

# Console mode (True = shows command window, False = no)
console=True  # Useful to see errors during development
```

#### Troubleshooting PyInstaller

**Error: "ModuleNotFoundError"**
```bash
# Add missing module to hiddenimports in start.spec
hiddenimports=['ctypes', 'bottle', 'your_missing_module']
# Then re-run: pyinstaller start.spec
```

**The .exe is very large (>500MB)**
- This is normal, it includes Python + all libraries + Arduino IDE
- To reduce size, you can exclude `arduino-1.8.19` from the spec

**Error when running the .exe**
```bash
# Run from CMD to see errors
.\dist\RoboticLab\RoboticLab.exe

# Or enable debug mode in start.spec
debug=True  # Generates more logs
```

### Modify Arduino Blocks

Blocks are defined in the `blocks/` folder. To add new blocks:

1. Edit files in `blocks/` (e.g., `blocks/arduino.js`)
2. Restart the server
3. Reload browser

## ğŸ› Troubleshooting

### Server won't start

```bash
# Verify Python is installed
python --version

# Verify dependencies are installed
pip list

# Reinstall dependencies
pip install -r requirements.txt --force-reinstall
```

### Arduino IDE not detected

1. Verify Arduino IDE is installed
2. In Settings, manually set the path to `arduino_debug.exe` (Windows) or `arduino` (Linux/Mac)
3. Restart Ardublockly

### Error "COM Port not available"

1. Connect Arduino via USB
2. Check in Device Manager (Windows) or `ls /dev/tty*` (Linux/Mac)
3. Select the correct port in Settings

### Code won't upload to board

1. Verify Arduino is connected
2. Close Arduino IDE if it's open (it may block the port)
3. Try another USB cable
4. Verify board and port are correctly configured

## ğŸ“ License

Copyright (c) 2016 carlosperate https://github.com/carlosperate/

Unless otherwise stated, the source code of this project is licensed under Apache License, Version 2.0.

See [LICENSE](LICENSE) file for details.

## ğŸ™ Credits

- Original project: [Ardublockly by carlosperate](https://github.com/carlosperate/ardublockly)
- Inspired by: [BlocklyDuino](https://github.com/BlocklyDuino/BlocklyDuino)
- Based on: [Google Blockly](https://developers.google.com/blockly/)
- Customization: **RoboticMinds / MdavidC-DevTech**

## ğŸ”— Useful Links

- ğŸ“š [Original Project Wiki](https://github.com/carlosperate/ardublockly/wiki)
- ğŸŒ [Online Demo](http://ardublockly.embeddedlog.com/demo/index.html)
- ğŸ”§ [Arduino IDE](https://www.arduino.cc/en/software)
- ğŸ [Python](https://www.python.org/)
- ğŸ“– [Blockly Documentation](https://developers.google.com/blockly/guides/overview)

## ğŸ“§ Support

To report issues or suggestions:
- Open an issue at: https://github.com/MdavidC-DevTech/Programacion_bloques/issues

---

**Happy block programming!** ğŸ‰ğŸ¤–
